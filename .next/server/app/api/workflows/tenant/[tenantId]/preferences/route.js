"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/workflows/tenant/[tenantId]/preferences/route";
exports.ids = ["app/api/workflows/tenant/[tenantId]/preferences/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fworkflows%2Ftenant%2F%5BtenantId%5D%2Fpreferences%2Froute&page=%2Fapi%2Fworkflows%2Ftenant%2F%5BtenantId%5D%2Fpreferences%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fworkflows%2Ftenant%2F%5BtenantId%5D%2Fpreferences%2Froute.ts&appDir=%2FUsers%2Fraistlin%2FDownloads%2F%E4%BB%93%E5%BA%93%2FAI%20Bid%20Assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fraistlin%2FDownloads%2F%E4%BB%93%E5%BA%93%2FAI%20Bid%20Assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fworkflows%2Ftenant%2F%5BtenantId%5D%2Fpreferences%2Froute&page=%2Fapi%2Fworkflows%2Ftenant%2F%5BtenantId%5D%2Fpreferences%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fworkflows%2Ftenant%2F%5BtenantId%5D%2Fpreferences%2Froute.ts&appDir=%2FUsers%2Fraistlin%2FDownloads%2F%E4%BB%93%E5%BA%93%2FAI%20Bid%20Assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fraistlin%2FDownloads%2F%E4%BB%93%E5%BA%93%2FAI%20Bid%20Assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_raistlin_Downloads_AI_Bid_Assistant_src_app_api_workflows_tenant_tenantId_preferences_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/workflows/tenant/[tenantId]/preferences/route.ts */ \"(rsc)/./src/app/api/workflows/tenant/[tenantId]/preferences/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/workflows/tenant/[tenantId]/preferences/route\",\n        pathname: \"/api/workflows/tenant/[tenantId]/preferences\",\n        filename: \"route\",\n        bundlePath: \"app/api/workflows/tenant/[tenantId]/preferences/route\"\n    },\n    resolvedPagePath: \"/Users/raistlin/Downloads/仓库/AI Bid Assistant/src/app/api/workflows/tenant/[tenantId]/preferences/route.ts\",\n    nextConfigOutput,\n    userland: _Users_raistlin_Downloads_AI_Bid_Assistant_src_app_api_workflows_tenant_tenantId_preferences_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/workflows/tenant/[tenantId]/preferences/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ3b3JrZmxvd3MlMkZ0ZW5hbnQlMkYlNUJ0ZW5hbnRJZCU1RCUyRnByZWZlcmVuY2VzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ3b3JrZmxvd3MlMkZ0ZW5hbnQlMkYlNUJ0ZW5hbnRJZCU1RCUyRnByZWZlcmVuY2VzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGd29ya2Zsb3dzJTJGdGVuYW50JTJGJTVCdGVuYW50SWQlNUQlMkZwcmVmZXJlbmNlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnJhaXN0bGluJTJGRG93bmxvYWRzJTJGJUU0JUJCJTkzJUU1JUJBJTkzJTJGQUklMjBCaWQlMjBBc3Npc3RhbnQlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGcmFpc3RsaW4lMkZEb3dubG9hZHMlMkYlRTQlQkIlOTMlRTUlQkElOTMlMkZBSSUyMEJpZCUyMEFzc2lzdGFudCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMwRDtBQUN2STtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2ludGVsbGlnZW50LWJpZGRpbmctc3lzdGVtLz84MmE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9yYWlzdGxpbi9Eb3dubG9hZHMv5LuT5bqTL0FJIEJpZCBBc3Npc3RhbnQvc3JjL2FwcC9hcGkvd29ya2Zsb3dzL3RlbmFudC9bdGVuYW50SWRdL3ByZWZlcmVuY2VzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS93b3JrZmxvd3MvdGVuYW50L1t0ZW5hbnRJZF0vcHJlZmVyZW5jZXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS93b3JrZmxvd3MvdGVuYW50L1t0ZW5hbnRJZF0vcHJlZmVyZW5jZXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3dvcmtmbG93cy90ZW5hbnQvW3RlbmFudElkXS9wcmVmZXJlbmNlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9yYWlzdGxpbi9Eb3dubG9hZHMv5LuT5bqTL0FJIEJpZCBBc3Npc3RhbnQvc3JjL2FwcC9hcGkvd29ya2Zsb3dzL3RlbmFudC9bdGVuYW50SWRdL3ByZWZlcmVuY2VzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3dvcmtmbG93cy90ZW5hbnQvW3RlbmFudElkXS9wcmVmZXJlbmNlcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fworkflows%2Ftenant%2F%5BtenantId%5D%2Fpreferences%2Froute&page=%2Fapi%2Fworkflows%2Ftenant%2F%5BtenantId%5D%2Fpreferences%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fworkflows%2Ftenant%2F%5BtenantId%5D%2Fpreferences%2Froute.ts&appDir=%2FUsers%2Fraistlin%2FDownloads%2F%E4%BB%93%E5%BA%93%2FAI%20Bid%20Assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fraistlin%2FDownloads%2F%E4%BB%93%E5%BA%93%2FAI%20Bid%20Assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/workflows/tenant/[tenantId]/preferences/route.ts":
/*!**********************************************************************!*\
  !*** ./src/app/api/workflows/tenant/[tenantId]/preferences/route.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n\n\n\n// Mock storage - in production, this would be in database\nconst mockPreferences = {};\nasync function GET(request, { params }) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session?.user?.tenantId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const { tenantId } = params;\n        // Verify user has access to this tenant\n        if (session.user.tenantId !== tenantId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Access denied\"\n            }, {\n                status: 403\n            });\n        }\n        // In production, fetch from database\n        // const preferences = await db.tenantPreferences.findUnique({\n        //   where: { tenantId }\n        // })\n        const preferences = mockPreferences[tenantId] || {\n            autoRetry: true,\n            maxRetries: 3,\n            notificationEmail: \"\",\n            defaultTimeout: 3600,\n            enableLogging: true,\n            logLevel: \"info\"\n        };\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            preferences\n        });\n    } catch (error) {\n        console.error(\"Error fetching tenant preferences:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to fetch preferences\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PUT(request, { params }) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session?.user?.tenantId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const { tenantId } = params;\n        // Verify user has access to this tenant\n        if (session.user.tenantId !== tenantId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Access denied\"\n            }, {\n                status: 403\n            });\n        }\n        const preferences = await request.json();\n        // Validate preferences\n        if (preferences.maxRetries < 1 || preferences.maxRetries > 10) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Max retries must be between 1 and 10\"\n            }, {\n                status: 400\n            });\n        }\n        if (preferences.defaultTimeout < 60 || preferences.defaultTimeout > 7200) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Default timeout must be between 60 and 7200 seconds\"\n            }, {\n                status: 400\n            });\n        }\n        if (![\n            \"debug\",\n            \"info\",\n            \"warn\",\n            \"error\"\n        ].includes(preferences.logLevel)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid log level\"\n            }, {\n                status: 400\n            });\n        }\n        // In production, save to database\n        // await db.tenantPreferences.upsert({\n        //   where: { tenantId },\n        //   update: preferences,\n        //   create: { tenantId, ...preferences }\n        // })\n        mockPreferences[tenantId] = preferences;\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            message: \"Preferences updated successfully\",\n            preferences\n        });\n    } catch (error) {\n        console.error(\"Error updating tenant preferences:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to update preferences\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS93b3JrZmxvd3MvdGVuYW50L1t0ZW5hbnRJZF0vcHJlZmVyZW5jZXMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXVEO0FBQ1g7QUFDSjtBQVd4QywwREFBMEQ7QUFDMUQsTUFBTUcsa0JBQXFELENBQUM7QUFFckQsZUFBZUMsSUFDcEJDLE9BQW9CLEVBQ3BCLEVBQUVDLE1BQU0sRUFBb0M7SUFFNUMsSUFBSTtRQUNGLE1BQU1DLFVBQVUsTUFBTU4sMkRBQWdCQSxDQUFDQyxrREFBV0E7UUFFbEQsSUFBSSxDQUFDSyxTQUFTQyxNQUFNQyxVQUFVO1lBQzVCLE9BQU9ULGtGQUFZQSxDQUFDVSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBZSxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDcEU7UUFFQSxNQUFNLEVBQUVILFFBQVEsRUFBRSxHQUFHSDtRQUVyQix3Q0FBd0M7UUFDeEMsSUFBSUMsUUFBUUMsSUFBSSxDQUFDQyxRQUFRLEtBQUtBLFVBQVU7WUFDdEMsT0FBT1Qsa0ZBQVlBLENBQUNVLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFnQixHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDckU7UUFFQSxxQ0FBcUM7UUFDckMsOERBQThEO1FBQzlELHdCQUF3QjtRQUN4QixLQUFLO1FBRUwsTUFBTUMsY0FBY1YsZUFBZSxDQUFDTSxTQUFTLElBQUk7WUFDL0NLLFdBQVc7WUFDWEMsWUFBWTtZQUNaQyxtQkFBbUI7WUFDbkJDLGdCQUFnQjtZQUNoQkMsZUFBZTtZQUNmQyxVQUFVO1FBQ1o7UUFFQSxPQUFPbkIsa0ZBQVlBLENBQUNVLElBQUksQ0FBQztZQUFFRztRQUFZO0lBQ3pDLEVBQUUsT0FBT0YsT0FBTztRQUNkUyxRQUFRVCxLQUFLLENBQUMsc0NBQXNDQTtRQUNwRCxPQUFPWCxrRkFBWUEsQ0FBQ1UsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQThCLEdBQ3ZDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRU8sZUFBZVMsSUFDcEJoQixPQUFvQixFQUNwQixFQUFFQyxNQUFNLEVBQW9DO0lBRTVDLElBQUk7UUFDRixNQUFNQyxVQUFVLE1BQU1OLDJEQUFnQkEsQ0FBQ0Msa0RBQVdBO1FBRWxELElBQUksQ0FBQ0ssU0FBU0MsTUFBTUMsVUFBVTtZQUM1QixPQUFPVCxrRkFBWUEsQ0FBQ1UsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQWUsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ3BFO1FBRUEsTUFBTSxFQUFFSCxRQUFRLEVBQUUsR0FBR0g7UUFFckIsd0NBQXdDO1FBQ3hDLElBQUlDLFFBQVFDLElBQUksQ0FBQ0MsUUFBUSxLQUFLQSxVQUFVO1lBQ3RDLE9BQU9ULGtGQUFZQSxDQUFDVSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBZ0IsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ3JFO1FBRUEsTUFBTUMsY0FBaUMsTUFBTVIsUUFBUUssSUFBSTtRQUV6RCx1QkFBdUI7UUFDdkIsSUFBSUcsWUFBWUUsVUFBVSxHQUFHLEtBQUtGLFlBQVlFLFVBQVUsR0FBRyxJQUFJO1lBQzdELE9BQU9mLGtGQUFZQSxDQUFDVSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQXVDLEdBQ2hEO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxJQUFJQyxZQUFZSSxjQUFjLEdBQUcsTUFBTUosWUFBWUksY0FBYyxHQUFHLE1BQU07WUFDeEUsT0FBT2pCLGtGQUFZQSxDQUFDVSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQXNELEdBQy9EO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxJQUFJLENBQUM7WUFBQztZQUFTO1lBQVE7WUFBUTtTQUFRLENBQUNVLFFBQVEsQ0FBQ1QsWUFBWU0sUUFBUSxHQUFHO1lBQ3RFLE9BQU9uQixrRkFBWUEsQ0FBQ1UsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUFvQixHQUM3QjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsa0NBQWtDO1FBQ2xDLHNDQUFzQztRQUN0Qyx5QkFBeUI7UUFDekIseUJBQXlCO1FBQ3pCLHlDQUF5QztRQUN6QyxLQUFLO1FBRUxULGVBQWUsQ0FBQ00sU0FBUyxHQUFHSTtRQUU1QixPQUFPYixrRkFBWUEsQ0FBQ1UsSUFBSSxDQUFDO1lBQ3ZCYSxTQUFTO1lBQ1RDLFNBQVM7WUFDVFg7UUFDRjtJQUNGLEVBQUUsT0FBT0YsT0FBTztRQUNkUyxRQUFRVCxLQUFLLENBQUMsc0NBQXNDQTtRQUNwRCxPQUFPWCxrRkFBWUEsQ0FBQ1UsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQStCLEdBQ3hDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW50ZWxsaWdlbnQtYmlkZGluZy1zeXN0ZW0vLi9zcmMvYXBwL2FwaS93b3JrZmxvd3MvdGVuYW50L1t0ZW5hbnRJZF0vcHJlZmVyZW5jZXMvcm91dGUudHM/MzYxZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoJ1xuaW1wb3J0IHsgYXV0aE9wdGlvbnMgfSBmcm9tICdAL2xpYi9hdXRoJ1xuXG5pbnRlcmZhY2UgVGVuYW50UHJlZmVyZW5jZXMge1xuICBhdXRvUmV0cnk6IGJvb2xlYW5cbiAgbWF4UmV0cmllczogbnVtYmVyXG4gIG5vdGlmaWNhdGlvbkVtYWlsOiBzdHJpbmdcbiAgZGVmYXVsdFRpbWVvdXQ6IG51bWJlclxuICBlbmFibGVMb2dnaW5nOiBib29sZWFuXG4gIGxvZ0xldmVsOiAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJ1xufVxuXG4vLyBNb2NrIHN0b3JhZ2UgLSBpbiBwcm9kdWN0aW9uLCB0aGlzIHdvdWxkIGJlIGluIGRhdGFiYXNlXG5jb25zdCBtb2NrUHJlZmVyZW5jZXM6IFJlY29yZDxzdHJpbmcsIFRlbmFudFByZWZlcmVuY2VzPiA9IHt9XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoXG4gIHJlcXVlc3Q6IE5leHRSZXF1ZXN0LFxuICB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyB0ZW5hbnRJZDogc3RyaW5nIH0gfVxuKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpXG4gICAgXG4gICAgaWYgKCFzZXNzaW9uPy51c2VyPy50ZW5hbnRJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSlcbiAgICB9XG5cbiAgICBjb25zdCB7IHRlbmFudElkIH0gPSBwYXJhbXNcblxuICAgIC8vIFZlcmlmeSB1c2VyIGhhcyBhY2Nlc3MgdG8gdGhpcyB0ZW5hbnRcbiAgICBpZiAoc2Vzc2lvbi51c2VyLnRlbmFudElkICE9PSB0ZW5hbnRJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgZGVuaWVkJyB9LCB7IHN0YXR1czogNDAzIH0pXG4gICAgfVxuXG4gICAgLy8gSW4gcHJvZHVjdGlvbiwgZmV0Y2ggZnJvbSBkYXRhYmFzZVxuICAgIC8vIGNvbnN0IHByZWZlcmVuY2VzID0gYXdhaXQgZGIudGVuYW50UHJlZmVyZW5jZXMuZmluZFVuaXF1ZSh7XG4gICAgLy8gICB3aGVyZTogeyB0ZW5hbnRJZCB9XG4gICAgLy8gfSlcblxuICAgIGNvbnN0IHByZWZlcmVuY2VzID0gbW9ja1ByZWZlcmVuY2VzW3RlbmFudElkXSB8fCB7XG4gICAgICBhdXRvUmV0cnk6IHRydWUsXG4gICAgICBtYXhSZXRyaWVzOiAzLFxuICAgICAgbm90aWZpY2F0aW9uRW1haWw6ICcnLFxuICAgICAgZGVmYXVsdFRpbWVvdXQ6IDM2MDAsXG4gICAgICBlbmFibGVMb2dnaW5nOiB0cnVlLFxuICAgICAgbG9nTGV2ZWw6ICdpbmZvJyBhcyBjb25zdFxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHByZWZlcmVuY2VzIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdGVuYW50IHByZWZlcmVuY2VzOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggcHJlZmVyZW5jZXMnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVChcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IHRlbmFudElkOiBzdHJpbmcgfSB9XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucylcbiAgICBcbiAgICBpZiAoIXNlc3Npb24/LnVzZXI/LnRlbmFudElkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICAgIH1cblxuICAgIGNvbnN0IHsgdGVuYW50SWQgfSA9IHBhcmFtc1xuXG4gICAgLy8gVmVyaWZ5IHVzZXIgaGFzIGFjY2VzcyB0byB0aGlzIHRlbmFudFxuICAgIGlmIChzZXNzaW9uLnVzZXIudGVuYW50SWQgIT09IHRlbmFudElkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBkZW5pZWQnIH0sIHsgc3RhdHVzOiA0MDMgfSlcbiAgICB9XG5cbiAgICBjb25zdCBwcmVmZXJlbmNlczogVGVuYW50UHJlZmVyZW5jZXMgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuXG4gICAgLy8gVmFsaWRhdGUgcHJlZmVyZW5jZXNcbiAgICBpZiAocHJlZmVyZW5jZXMubWF4UmV0cmllcyA8IDEgfHwgcHJlZmVyZW5jZXMubWF4UmV0cmllcyA+IDEwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdNYXggcmV0cmllcyBtdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChwcmVmZXJlbmNlcy5kZWZhdWx0VGltZW91dCA8IDYwIHx8IHByZWZlcmVuY2VzLmRlZmF1bHRUaW1lb3V0ID4gNzIwMCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnRGVmYXVsdCB0aW1lb3V0IG11c3QgYmUgYmV0d2VlbiA2MCBhbmQgNzIwMCBzZWNvbmRzJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoIVsnZGVidWcnLCAnaW5mbycsICd3YXJuJywgJ2Vycm9yJ10uaW5jbHVkZXMocHJlZmVyZW5jZXMubG9nTGV2ZWwpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdJbnZhbGlkIGxvZyBsZXZlbCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gSW4gcHJvZHVjdGlvbiwgc2F2ZSB0byBkYXRhYmFzZVxuICAgIC8vIGF3YWl0IGRiLnRlbmFudFByZWZlcmVuY2VzLnVwc2VydCh7XG4gICAgLy8gICB3aGVyZTogeyB0ZW5hbnRJZCB9LFxuICAgIC8vICAgdXBkYXRlOiBwcmVmZXJlbmNlcyxcbiAgICAvLyAgIGNyZWF0ZTogeyB0ZW5hbnRJZCwgLi4ucHJlZmVyZW5jZXMgfVxuICAgIC8vIH0pXG5cbiAgICBtb2NrUHJlZmVyZW5jZXNbdGVuYW50SWRdID0gcHJlZmVyZW5jZXNcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6ICdQcmVmZXJlbmNlcyB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICBwcmVmZXJlbmNlcyBcbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHRlbmFudCBwcmVmZXJlbmNlczonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHVwZGF0ZSBwcmVmZXJlbmNlcycgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiYXV0aE9wdGlvbnMiLCJtb2NrUHJlZmVyZW5jZXMiLCJHRVQiLCJyZXF1ZXN0IiwicGFyYW1zIiwic2Vzc2lvbiIsInVzZXIiLCJ0ZW5hbnRJZCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInByZWZlcmVuY2VzIiwiYXV0b1JldHJ5IiwibWF4UmV0cmllcyIsIm5vdGlmaWNhdGlvbkVtYWlsIiwiZGVmYXVsdFRpbWVvdXQiLCJlbmFibGVMb2dnaW5nIiwibG9nTGV2ZWwiLCJjb25zb2xlIiwiUFVUIiwiaW5jbHVkZXMiLCJzdWNjZXNzIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/workflows/tenant/[tenantId]/preferences/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthUtils: () => (/* binding */ AuthUtils),\n/* harmony export */   AuthenticationError: () => (/* reexport safe */ _lib_error_handler__WEBPACK_IMPORTED_MODULE_3__.AuthenticationError),\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/database */ \"(rsc)/./src/lib/database.ts\");\n/* harmony import */ var _lib_error_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/error-handler */ \"(rsc)/./src/lib/error-handler.ts\");\n\n\n\n\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"邮箱\",\n                    type: \"text\"\n                },\n                password: {\n                    label: \"密码\",\n                    type: \"password\"\n                },\n                domain: {\n                    label: \"域名\",\n                    type: \"text\",\n                    placeholder: \"可选\"\n                }\n            },\n            async authorize (credentials) {\n                console.log(\"认证请求:\", credentials);\n                // 验证凭据\n                if (!credentials?.email || !credentials?.password) {\n                    console.log(\"缺少凭据\");\n                    throw new _lib_error_handler__WEBPACK_IMPORTED_MODULE_3__.AuthenticationError(\"邮箱和密码为必填项\", \"MISSING_CREDENTIALS\");\n                }\n                // 验证邮箱格式\n                const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n                if (!emailRegex.test(credentials.email)) {\n                    throw new _lib_error_handler__WEBPACK_IMPORTED_MODULE_3__.AuthenticationError(\"邮箱格式不正确\", \"INVALID_EMAIL\");\n                }\n                try {\n                    // 从数据库查找用户\n                    const user = await _lib_database__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n                        where: {\n                            email: credentials.email\n                        },\n                        include: {\n                            tenant: true\n                        }\n                    });\n                    console.log(\"找到用户:\", user);\n                    // 检查用户是否存在\n                    if (!user) {\n                        throw new _lib_error_handler__WEBPACK_IMPORTED_MODULE_3__.AuthenticationError(\"用户不存在\", \"USER_NOT_FOUND\");\n                    }\n                    // 检查用户是否激活\n                    if (!user.isActive) {\n                        throw new _lib_error_handler__WEBPACK_IMPORTED_MODULE_3__.AuthenticationError(\"账户已被禁用\", \"ACCOUNT_DISABLED\");\n                    }\n                    // 检查密码是否存在\n                    if (!user.password) {\n                        throw new _lib_error_handler__WEBPACK_IMPORTED_MODULE_3__.AuthenticationError(\"账户未设置密码\", \"PASSWORD_NOT_SET\");\n                    }\n                    // 验证密码\n                    const isValidPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(credentials.password, user.password);\n                    if (!isValidPassword) {\n                        throw new _lib_error_handler__WEBPACK_IMPORTED_MODULE_3__.AuthenticationError(\"密码错误\", \"INVALID_PASSWORD\");\n                    }\n                    console.log(\"密码验证成功\");\n                    return {\n                        id: user.id,\n                        email: user.email,\n                        name: user.name,\n                        tenantId: user.tenantId\n                    };\n                } catch (error) {\n                    // 如果是自定义认证错误，重新抛出\n                    if (error instanceof _lib_error_handler__WEBPACK_IMPORTED_MODULE_3__.AuthenticationError) {\n                        throw error;\n                    }\n                    // 其他错误记录并抛出通用错误\n                    console.error(\"认证过程中发生错误:\", error);\n                    throw new _lib_error_handler__WEBPACK_IMPORTED_MODULE_3__.AuthenticationError(\"认证服务暂时不可用\", \"AUTH_SERVICE_ERROR\");\n                }\n            }\n        })\n    ],\n    callbacks: {\n        async jwt ({ token, user }) {\n            console.log(\"JWT回调:\", {\n                token,\n                user\n            });\n            if (user) {\n                token.id = user.id;\n                token.tenantId = user.tenantId;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            console.log(\"Session回调:\", {\n                session,\n                token\n            });\n            if (token && session.user) {\n                session.user.id = token.id;\n                session.user.tenantId = token.tenantId;\n            }\n            return session;\n        }\n    },\n    events: {\n        async signIn ({ user, account, profile, isNewUser }) {\n            console.log(\"用户登录:\", {\n                user,\n                account,\n                profile,\n                isNewUser\n            });\n            try {\n                // 更新用户最后登录时间\n                if (user?.id) {\n                    await _lib_database__WEBPACK_IMPORTED_MODULE_2__.prisma.user.update({\n                        where: {\n                            id: user.id\n                        },\n                        data: {\n                            lastLogin: new Date()\n                        }\n                    });\n                }\n            } catch (error) {\n                console.error(\"更新用户最后登录时间失败:\", error);\n            }\n        },\n        async signOut ({ token, session }) {\n            console.log(\"用户登出:\", {\n                token,\n                session\n            });\n        },\n        async createUser ({ user }) {\n            console.log(\"创建新用户:\", user);\n        }\n    },\n    pages: {\n        signIn: \"/auth/signin\",\n        error: \"/auth/signin\"\n    },\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60 // 30 days\n    },\n    secret: \"supersecretnextauthkeyfordevelopment\",\n    debug: \"development\" === \"development\"\n};\n/**\n * Authentication utilities\n */ class AuthUtils {\n    /**\n   * Validate that a user has access to a specific tenant\n   */ static async validateTenantAccess(userId, tenantId) {\n        try {\n            const user = await _lib_database__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n                where: {\n                    id: userId\n                },\n                select: {\n                    tenantId: true\n                }\n            });\n            return user?.tenantId === tenantId;\n        } catch (error) {\n            console.error(\"Error validating tenant access:\", error);\n            return false;\n        }\n    }\n    /**\n   * Check if a user has a specific permission\n   */ static async hasPermission(userId, resource, action) {\n        try {\n            // In a real implementation, this would check the user's role and permissions\n            // For now, we'll allow all authenticated users to execute workflows\n            const user = await _lib_database__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n                where: {\n                    id: userId\n                },\n                select: {\n                    role: true\n                }\n            });\n            // Allow ADMIN and MANAGER roles to execute workflows\n            // For other roles, allow workflow execution by default\n            return !!user;\n        } catch (error) {\n            console.error(\"Error checking permissions:\", error);\n            return false;\n        }\n    }\n}\n// 导出认证错误类\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bEMsRUFBRTtBQUVGOztDQUVDLEdBQ00sTUFBTUk7SUFDWDs7R0FFQyxHQUNELGFBQWFDLHFCQUFxQkMsTUFBYyxFQUFFM0IsUUFBZ0IsRUFBb0I7UUFDcEYsSUFBSTtZQUNGLE1BQU1ULE9BQU8sTUFBTWpCLGlEQUFNQSxDQUFDaUIsSUFBSSxDQUFDQyxVQUFVLENBQUM7Z0JBQ3hDQyxPQUFPO29CQUFFTSxJQUFJNEI7Z0JBQU87Z0JBQ3BCQyxRQUFRO29CQUFFNUIsVUFBVTtnQkFBSztZQUMzQjtZQUVBLE9BQU9ULE1BQU1TLGFBQWFBO1FBQzVCLEVBQUUsT0FBT0MsT0FBTztZQUNkZCxRQUFRYyxLQUFLLENBQUMsbUNBQW1DQTtZQUNqRCxPQUFPO1FBQ1Q7SUFDRjtJQUVBOztHQUVDLEdBQ0QsYUFBYTRCLGNBQWNGLE1BQWMsRUFBRUcsUUFBZ0IsRUFBRUMsTUFBYyxFQUFvQjtRQUM3RixJQUFJO1lBQ0YsNkVBQTZFO1lBQzdFLG9FQUFvRTtZQUNwRSxNQUFNeEMsT0FBTyxNQUFNakIsaURBQU1BLENBQUNpQixJQUFJLENBQUNDLFVBQVUsQ0FBQztnQkFDeENDLE9BQU87b0JBQUVNLElBQUk0QjtnQkFBTztnQkFDcEJDLFFBQVE7b0JBQUVJLE1BQU07Z0JBQUs7WUFDdkI7WUFFQSxxREFBcUQ7WUFDckQsdURBQXVEO1lBQ3ZELE9BQU8sQ0FBQyxDQUFDekM7UUFDWCxFQUFFLE9BQU9VLE9BQU87WUFDZGQsUUFBUWMsS0FBSyxDQUFDLCtCQUErQkE7WUFDN0MsT0FBTztRQUNUO0lBQ0Y7QUFDRjtBQWlDQSxVQUFVO0FBQ3FCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW50ZWxsaWdlbnQtYmlkZGluZy1zeXN0ZW0vLi9zcmMvbGliL2F1dGgudHM/NjY5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXV0aE9wdGlvbnMgfSBmcm9tICduZXh0LWF1dGgnO1xuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFscyc7XG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJztcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL2RhdGFiYXNlJztcbmltcG9ydCB7IEF1dGhlbnRpY2F0aW9uRXJyb3IgfSBmcm9tICdAL2xpYi9lcnJvci1oYW5kbGVyJztcblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XG4gIHByb3ZpZGVyczogW1xuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogJ0NyZWRlbnRpYWxzJyxcbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGVtYWlsOiB7IGxhYmVsOiAn6YKu566xJywgdHlwZTogJ3RleHQnIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiAn5a+G56CBJywgdHlwZTogJ3Bhc3N3b3JkJyB9LFxuICAgICAgICBkb21haW46IHsgbGFiZWw6ICfln5/lkI0nLCB0eXBlOiAndGV4dCcsIHBsYWNlaG9sZGVyOiAn5Y+v6YCJJyB9XG4gICAgICB9LFxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCforqTor4Hor7fmsYI6JywgY3JlZGVudGlhbHMpO1xuICAgICAgICBcbiAgICAgICAgLy8g6aqM6K+B5Yet5o2uXG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn57y65bCR5Yet5o2uJyk7XG4gICAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoJ+mCrueuseWSjOWvhueggeS4uuW/heWhq+mhuScsICdNSVNTSU5HX0NSRURFTlRJQUxTJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDpqozor4Hpgq7nrrHmoLzlvI9cbiAgICAgICAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvO1xuICAgICAgICBpZiAoIWVtYWlsUmVnZXgudGVzdChjcmVkZW50aWFscy5lbWFpbCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcign6YKu566x5qC85byP5LiN5q2j56GuJywgJ0lOVkFMSURfRU1BSUwnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8g5LuO5pWw5o2u5bqT5p+l5om+55So5oi3XG4gICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsIH0sXG4gICAgICAgICAgICBpbmNsdWRlOiB7IHRlbmFudDogdHJ1ZSB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coJ+aJvuWIsOeUqOaItzonLCB1c2VyKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyDmo4Dmn6XnlKjmiLfmmK/lkKblrZjlnKhcbiAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKCfnlKjmiLfkuI3lrZjlnKgnLCAnVVNFUl9OT1RfRk9VTkQnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyDmo4Dmn6XnlKjmiLfmmK/lkKbmv4DmtLtcbiAgICAgICAgICBpZiAoIXVzZXIuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKCfotKbmiLflt7LooqvnpoHnlKgnLCAnQUNDT1VOVF9ESVNBQkxFRCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIOajgOafpeWvhueggeaYr+WQpuWtmOWcqFxuICAgICAgICAgIGlmICghdXNlci5wYXNzd29yZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoJ+i0puaIt+acquiuvue9ruWvhueggScsICdQQVNTV09SRF9OT1RfU0VUJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIOmqjOivgeWvhueggVxuICAgICAgICAgIGNvbnN0IGlzVmFsaWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKGNyZWRlbnRpYWxzLnBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcbiAgICAgICAgICBpZiAoIWlzVmFsaWRQYXNzd29yZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoJ+WvhueggemUmeivrycsICdJTlZBTElEX1BBU1NXT1JEJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc29sZS5sb2coJ+WvhueggemqjOivgeaIkOWKnycpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgICAgdGVuYW50SWQ6IHVzZXIudGVuYW50SWRcbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIOWmguaenOaYr+iHquWumuS5ieiupOivgemUmeivr++8jOmHjeaWsOaKm+WHulxuICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEF1dGhlbnRpY2F0aW9uRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyDlhbbku5bplJnor6/orrDlvZXlubbmipvlh7rpgJrnlKjplJnor69cbiAgICAgICAgICBjb25zb2xlLmVycm9yKCforqTor4Hov4fnqIvkuK3lj5HnlJ/plJnor686JywgZXJyb3IpO1xuICAgICAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKCforqTor4HmnI3liqHmmoLml7bkuI3lj6/nlKgnLCAnQVVUSF9TRVJWSUNFX0VSUk9SJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICBdLFxuICBjYWxsYmFja3M6IHtcbiAgICBhc3luYyBqd3QoeyB0b2tlbiwgdXNlciB9KSB7XG4gICAgICBjb25zb2xlLmxvZygnSldU5Zue6LCDOicsIHsgdG9rZW4sIHVzZXIgfSk7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICB0b2tlbi5pZCA9IHVzZXIuaWQ7XG4gICAgICAgIHRva2VuLnRlbmFudElkID0gKHVzZXIgYXMgYW55KS50ZW5hbnRJZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9LFxuICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XG4gICAgICBjb25zb2xlLmxvZygnU2Vzc2lvbuWbnuiwgzonLCB7IHNlc3Npb24sIHRva2VuIH0pO1xuICAgICAgaWYgKHRva2VuICYmIHNlc3Npb24udXNlcikge1xuICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB0b2tlbi5pZCBhcyBzdHJpbmc7XG4gICAgICAgIChzZXNzaW9uLnVzZXIgYXMgYW55KS50ZW5hbnRJZCA9IHRva2VuLnRlbmFudElkIGFzIHN0cmluZztcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH1cbiAgfSxcbiAgZXZlbnRzOiB7XG4gICAgYXN5bmMgc2lnbkluKHsgdXNlciwgYWNjb3VudCwgcHJvZmlsZSwgaXNOZXdVc2VyIH0pIHtcbiAgICAgIGNvbnNvbGUubG9nKCfnlKjmiLfnmbvlvZU6JywgeyB1c2VyLCBhY2NvdW50LCBwcm9maWxlLCBpc05ld1VzZXIgfSk7XG4gICAgICB0cnkge1xuICAgICAgICAvLyDmm7TmlrDnlKjmiLfmnIDlkI7nmbvlvZXml7bpl7RcbiAgICAgICAgaWYgKHVzZXI/LmlkKSB7XG4gICAgICAgICAgYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiB1c2VyLmlkIH0sXG4gICAgICAgICAgICBkYXRhOiB7IGxhc3RMb2dpbjogbmV3IERhdGUoKSB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+abtOaWsOeUqOaIt+acgOWQjueZu+W9leaXtumXtOWksei0pTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSxcbiAgICBhc3luYyBzaWduT3V0KHsgdG9rZW4sIHNlc3Npb24gfSkge1xuICAgICAgY29uc29sZS5sb2coJ+eUqOaIt+eZu+WHujonLCB7IHRva2VuLCBzZXNzaW9uIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgY3JlYXRlVXNlcih7IHVzZXIgfSkge1xuICAgICAgY29uc29sZS5sb2coJ+WIm+W7uuaWsOeUqOaItzonLCB1c2VyKTtcbiAgICB9XG4gIH0sXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiAnL2F1dGgvc2lnbmluJyxcbiAgICBlcnJvcjogJy9hdXRoL3NpZ25pbidcbiAgfSxcbiAgc2Vzc2lvbjoge1xuICAgIHN0cmF0ZWd5OiAnand0JyxcbiAgICBtYXhBZ2U6IDMwICogMjQgKiA2MCAqIDYwIC8vIDMwIGRheXNcbiAgfSxcbiAgc2VjcmV0OiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQsXG4gIGRlYnVnOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JywgLy8g5LuF5Zyo5byA5Y+R546v5aKD5ZCv55So6LCD6K+V5qih5byPXG59O1xuXG4vKipcbiAqIEF1dGhlbnRpY2F0aW9uIHV0aWxpdGllc1xuICovXG5leHBvcnQgY2xhc3MgQXV0aFV0aWxzIHtcbiAgLyoqXG4gICAqIFZhbGlkYXRlIHRoYXQgYSB1c2VyIGhhcyBhY2Nlc3MgdG8gYSBzcGVjaWZpYyB0ZW5hbnRcbiAgICovXG4gIHN0YXRpYyBhc3luYyB2YWxpZGF0ZVRlbmFudEFjY2Vzcyh1c2VySWQ6IHN0cmluZywgdGVuYW50SWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IHRlbmFudElkOiB0cnVlIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4gdXNlcj8udGVuYW50SWQgPT09IHRlbmFudElkO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB2YWxpZGF0aW5nIHRlbmFudCBhY2Nlc3M6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHVzZXIgaGFzIGEgc3BlY2lmaWMgcGVybWlzc2lvblxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGhhc1Blcm1pc3Npb24odXNlcklkOiBzdHJpbmcsIHJlc291cmNlOiBzdHJpbmcsIGFjdGlvbjogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBjaGVjayB0aGUgdXNlcidzIHJvbGUgYW5kIHBlcm1pc3Npb25zXG4gICAgICAvLyBGb3Igbm93LCB3ZSdsbCBhbGxvdyBhbGwgYXV0aGVudGljYXRlZCB1c2VycyB0byBleGVjdXRlIHdvcmtmbG93c1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICAgIHNlbGVjdDogeyByb2xlOiB0cnVlIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBbGxvdyBBRE1JTiBhbmQgTUFOQUdFUiByb2xlcyB0byBleGVjdXRlIHdvcmtmbG93c1xuICAgICAgLy8gRm9yIG90aGVyIHJvbGVzLCBhbGxvdyB3b3JrZmxvdyBleGVjdXRpb24gYnkgZGVmYXVsdFxuICAgICAgcmV0dXJuICEhdXNlcjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgcGVybWlzc2lvbnM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIOenn+aIt+S4iuS4i+aWh+exu+Wei+WumuS5iVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRlbmFudENvbnRleHQge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRvbWFpbjogc3RyaW5nO1xuICBzZXR0aW5nczogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuLyoqXG4gKiDmianlsZXnmoRTZXNzaW9u57G75Z6LXG4gKi9cbmRlY2xhcmUgbW9kdWxlICduZXh0LWF1dGgnIHtcbiAgaW50ZXJmYWNlIFNlc3Npb24ge1xuICAgIHVzZXI6IHtcbiAgICAgIGlkOiBzdHJpbmc7XG4gICAgICBlbWFpbDogc3RyaW5nO1xuICAgICAgbmFtZT86IHN0cmluZyB8IG51bGw7XG4gICAgICB0ZW5hbnRJZDogc3RyaW5nO1xuICAgIH07XG4gIH1cbn1cblxuZGVjbGFyZSBtb2R1bGUgJ25leHQtYXV0aC9qd3QnIHtcbiAgaW50ZXJmYWNlIEpXVCB7XG4gICAgdGVuYW50SWQ/OiBzdHJpbmc7XG4gICAgaWQ/OiBzdHJpbmc7XG4gIH1cbn1cblxuLy8g5a+85Ye66K6k6K+B6ZSZ6K+v57G7XG5leHBvcnQgeyBBdXRoZW50aWNhdGlvbkVycm9yIH07Il0sIm5hbWVzIjpbIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJiY3J5cHQiLCJwcmlzbWEiLCJBdXRoZW50aWNhdGlvbkVycm9yIiwiYXV0aE9wdGlvbnMiLCJwcm92aWRlcnMiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiZG9tYWluIiwicGxhY2Vob2xkZXIiLCJhdXRob3JpemUiLCJjb25zb2xlIiwibG9nIiwiZW1haWxSZWdleCIsInRlc3QiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaW5jbHVkZSIsInRlbmFudCIsImlzQWN0aXZlIiwiaXNWYWxpZFBhc3N3b3JkIiwiY29tcGFyZSIsImlkIiwidGVuYW50SWQiLCJlcnJvciIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIiwic2Vzc2lvbiIsImV2ZW50cyIsInNpZ25JbiIsImFjY291bnQiLCJwcm9maWxlIiwiaXNOZXdVc2VyIiwidXBkYXRlIiwiZGF0YSIsImxhc3RMb2dpbiIsIkRhdGUiLCJzaWduT3V0IiwiY3JlYXRlVXNlciIsInBhZ2VzIiwic3RyYXRlZ3kiLCJtYXhBZ2UiLCJzZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVEFVVEhfU0VDUkVUIiwiZGVidWciLCJBdXRoVXRpbHMiLCJ2YWxpZGF0ZVRlbmFudEFjY2VzcyIsInVzZXJJZCIsInNlbGVjdCIsImhhc1Blcm1pc3Npb24iLCJyZXNvdXJjZSIsImFjdGlvbiIsInJvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/database.ts":
/*!*****************************!*\
  !*** ./src/lib/database.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma),\n/* harmony export */   withTenantIsolation: () => (/* binding */ withTenantIsolation)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_error_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/error-handler */ \"(rsc)/./src/lib/error-handler.ts\");\n\n\n// 创建Prisma客户端实例\nconst prisma = globalThis.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) {\n    globalThis.prisma = prisma;\n}\n// 需要通过关联模型进行租户过滤的模型列表\nconst MODELS_WITH_RELATION_TENANT_FILTER = [\n    \"WorkflowExecution\",\n    \"GeneratedContent\"\n];\n// 租户隔离中间件\nfunction withTenantIsolation(tenantId) {\n    // 验证租户ID\n    if (!tenantId) {\n        throw new _lib_error_handler__WEBPACK_IMPORTED_MODULE_1__.DatabaseError(\"租户ID不能为空\", \"MISSING_TENANT_ID\");\n    }\n    return prisma.$extends({\n        query: {\n            $allModels: {\n                async $allOperations ({ model, operation, args, query }) {\n                    try {\n                        // 为查询操作添加租户过滤\n                        if ([\n                            \"findFirst\",\n                            \"findMany\",\n                            \"findUnique\",\n                            \"update\",\n                            \"updateMany\",\n                            \"delete\",\n                            \"deleteMany\"\n                        ].includes(operation)) {\n                            if (\"where\" in args) {\n                                if (args.where) {\n                                    // 对于需要通过关联模型过滤租户的模型\n                                    if (MODELS_WITH_RELATION_TENANT_FILTER.includes(model)) {\n                                        args.where = {\n                                            ...args.where,\n                                            bidProject: {\n                                                tenantId: tenantId\n                                            }\n                                        };\n                                    } else {\n                                        args.where = {\n                                            ...args.where,\n                                            tenantId\n                                        };\n                                    }\n                                } else {\n                                    // 对于需要通过关联模型过滤租户的模型\n                                    if (MODELS_WITH_RELATION_TENANT_FILTER.includes(model)) {\n                                        args.where = {\n                                            bidProject: {\n                                                tenantId: tenantId\n                                            }\n                                        };\n                                    } else {\n                                        args.where = {\n                                            tenantId\n                                        };\n                                    }\n                                }\n                            }\n                        }\n                        // 为count操作特殊处理\n                        if (operation === \"count\") {\n                            if (\"where\" in args) {\n                                if (args.where) {\n                                    // 对于需要通过关联模型过滤租户的模型\n                                    if (MODELS_WITH_RELATION_TENANT_FILTER.includes(model)) {\n                                        args.where = {\n                                            ...args.where,\n                                            bidProject: {\n                                                tenantId: tenantId\n                                            }\n                                        };\n                                    } else {\n                                        args.where = {\n                                            ...args.where,\n                                            tenantId\n                                        };\n                                    }\n                                } else {\n                                    // 对于需要通过关联模型过滤租户的模型\n                                    if (MODELS_WITH_RELATION_TENANT_FILTER.includes(model)) {\n                                        args.where = {\n                                            bidProject: {\n                                                tenantId: tenantId\n                                            }\n                                        };\n                                    } else {\n                                        args.where = {\n                                            tenantId\n                                        };\n                                    }\n                                }\n                            } else {\n                                // 对于需要通过关联模型过滤租户的模型\n                                if (MODELS_WITH_RELATION_TENANT_FILTER.includes(model)) {\n                                    args.where = {\n                                        bidProject: {\n                                            tenantId: tenantId\n                                        }\n                                    };\n                                } else {\n                                    args.where = {\n                                        tenantId\n                                    };\n                                }\n                            }\n                        }\n                        // 为创建操作添加租户ID\n                        if (operation === \"create\" && \"data\" in args && args.data) {\n                            // 通过关联模型的模型不需要直接设置tenantId\n                            if (!MODELS_WITH_RELATION_TENANT_FILTER.includes(model)) {\n                                args.data.tenantId = tenantId;\n                            }\n                        }\n                        if (operation === \"createMany\" && args.data) {\n                            // 通过关联模型的模型不需要直接设置tenantId\n                            if (!MODELS_WITH_RELATION_TENANT_FILTER.includes(model)) {\n                                args.data = args.data.map((item)=>({\n                                        ...item,\n                                        tenantId\n                                    }));\n                            }\n                        }\n                        return await query(args);\n                    } catch (error) {\n                        console.error(`数据库操作失败 - 模型: ${model}, 操作: ${operation}`, error);\n                        throw new _lib_error_handler__WEBPACK_IMPORTED_MODULE_1__.DatabaseError(`数据库操作失败: ${error.message || \"未知错误\"}`, \"DATABASE_OPERATION_FAILED\");\n                    }\n                }\n            }\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVFBLEtBQUtJLElBQUksRUFBRTs0QkFDekQsMkJBQTJCOzRCQUMzQixJQUFJLENBQUNiLG1DQUFtQ1UsUUFBUSxDQUFDSCxRQUFRO2dDQUN0REUsS0FBS0ksSUFBSSxDQUFTWCxRQUFRLEdBQUdBOzRCQUNoQzt3QkFDRjt3QkFFQSxJQUFJTSxjQUFjLGdCQUFnQkMsS0FBS0ksSUFBSSxFQUFFOzRCQUMzQywyQkFBMkI7NEJBQzNCLElBQUksQ0FBQ2IsbUNBQW1DVSxRQUFRLENBQUNILFFBQVE7Z0NBQ3ZERSxLQUFLSSxJQUFJLEdBQUcsS0FBTUEsSUFBSSxDQUFXQyxHQUFHLENBQUMsQ0FBQ0MsT0FBZTt3Q0FBRSxHQUFHQSxJQUFJO3dDQUFFYjtvQ0FBUzs0QkFDM0U7d0JBQ0Y7d0JBRUEsT0FBTyxNQUFNRSxNQUFNSztvQkFDckIsRUFBRSxPQUFPTyxPQUFZO3dCQUNuQkMsUUFBUUQsS0FBSyxDQUFDLENBQUMsY0FBYyxFQUFFVCxNQUFNLE1BQU0sRUFBRUMsVUFBVSxDQUFDLEVBQUVRO3dCQUMxRCxNQUFNLElBQUlyQiw2REFBYUEsQ0FDckIsQ0FBQyxTQUFTLEVBQUVxQixNQUFNRSxPQUFPLElBQUksT0FBTyxDQUFDLEVBQ3JDO29CQUVKO2dCQUNGO1lBQ0Y7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnRlbGxpZ2VudC1iaWRkaW5nLXN5c3RlbS8uL3NyYy9saWIvZGF0YWJhc2UudHM/YzFiMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5pbXBvcnQgeyBEYXRhYmFzZUVycm9yIH0gZnJvbSAnQC9saWIvZXJyb3ItaGFuZGxlcic7XG5cbi8vIOWFqOWxgFByaXNtYeWuouaIt+err+WunuS+i++8jOmBv+WFjeWcqOW8gOWPkeeOr+Wig+S4reWIm+W7uuWkmuS4quWunuS+i1xuZGVjbGFyZSBnbG9iYWwge1xuICB2YXIgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWQ7XG59XG5cbi8vIOWIm+W7ulByaXNtYeWuouaIt+err+WunuS+i1xuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbFRoaXMucHJpc21hIHx8IG5ldyBQcmlzbWFDbGllbnQoe1xuICBsb2c6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gWydxdWVyeScsICdlcnJvcicsICd3YXJuJ10gOiBbJ2Vycm9yJ10sXG59KTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZ2xvYmFsVGhpcy5wcmlzbWEgPSBwcmlzbWE7XG59XG5cbi8vIOmcgOimgemAmui/h+WFs+iBlOaooeWei+i/m+ihjOenn+aIt+i/h+a7pOeahOaooeWei+WIl+ihqFxuY29uc3QgTU9ERUxTX1dJVEhfUkVMQVRJT05fVEVOQU5UX0ZJTFRFUiA9IFsnV29ya2Zsb3dFeGVjdXRpb24nLCAnR2VuZXJhdGVkQ29udGVudCddO1xuXG4vLyDnp5/miLfpmpTnprvkuK3pl7Tku7ZcbmV4cG9ydCBmdW5jdGlvbiB3aXRoVGVuYW50SXNvbGF0aW9uKHRlbmFudElkOiBzdHJpbmcpIHtcbiAgLy8g6aqM6K+B56ef5oi3SURcbiAgaWYgKCF0ZW5hbnRJZCkge1xuICAgIHRocm93IG5ldyBEYXRhYmFzZUVycm9yKCfnp5/miLdJROS4jeiDveS4uuepuicsICdNSVNTSU5HX1RFTkFOVF9JRCcpO1xuICB9XG5cbiAgcmV0dXJuIHByaXNtYS4kZXh0ZW5kcyh7XG4gICAgcXVlcnk6IHtcbiAgICAgICRhbGxNb2RlbHM6IHtcbiAgICAgICAgYXN5bmMgJGFsbE9wZXJhdGlvbnMoeyBtb2RlbCwgb3BlcmF0aW9uLCBhcmdzLCBxdWVyeSB9KSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIOS4uuafpeivouaTjeS9nOa3u+WKoOenn+aIt+i/h+a7pFxuICAgICAgICAgICAgaWYgKFsnZmluZEZpcnN0JywgJ2ZpbmRNYW55JywgJ2ZpbmRVbmlxdWUnLCAndXBkYXRlJywgJ3VwZGF0ZU1hbnknLCAnZGVsZXRlJywgJ2RlbGV0ZU1hbnknXS5pbmNsdWRlcyhvcGVyYXRpb24pKSB7XG4gICAgICAgICAgICAgIGlmICgnd2hlcmUnIGluIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy53aGVyZSkge1xuICAgICAgICAgICAgICAgICAgLy8g5a+55LqO6ZyA6KaB6YCa6L+H5YWz6IGU5qih5Z6L6L+H5ruk56ef5oi355qE5qih5Z6LXG4gICAgICAgICAgICAgICAgICBpZiAoTU9ERUxTX1dJVEhfUkVMQVRJT05fVEVOQU5UX0ZJTFRFUi5pbmNsdWRlcyhtb2RlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJncy53aGVyZSA9IHsgXG4gICAgICAgICAgICAgICAgICAgICAgLi4uYXJncy53aGVyZSwgXG4gICAgICAgICAgICAgICAgICAgICAgYmlkUHJvamVjdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVuYW50SWQ6IHRlbmFudElkXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXJncy53aGVyZSA9IHsgLi4uYXJncy53aGVyZSwgdGVuYW50SWQgfTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8g5a+55LqO6ZyA6KaB6YCa6L+H5YWz6IGU5qih5Z6L6L+H5ruk56ef5oi355qE5qih5Z6LXG4gICAgICAgICAgICAgICAgICBpZiAoTU9ERUxTX1dJVEhfUkVMQVRJT05fVEVOQU5UX0ZJTFRFUi5pbmNsdWRlcyhtb2RlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJncy53aGVyZSA9IHsgXG4gICAgICAgICAgICAgICAgICAgICAgYmlkUHJvamVjdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVuYW50SWQ6IHRlbmFudElkXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXJncy53aGVyZSA9IHsgdGVuYW50SWQgfTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5Li6Y291bnTmk43kvZznibnmrorlpITnkIZcbiAgICAgICAgICAgIGlmIChvcGVyYXRpb24gPT09ICdjb3VudCcpIHtcbiAgICAgICAgICAgICAgaWYgKCd3aGVyZScgaW4gYXJncykge1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLndoZXJlKSB7XG4gICAgICAgICAgICAgICAgICAvLyDlr7nkuo7pnIDopoHpgJrov4flhbPogZTmqKHlnovov4fmu6Tnp5/miLfnmoTmqKHlnotcbiAgICAgICAgICAgICAgICAgIGlmIChNT0RFTFNfV0lUSF9SRUxBVElPTl9URU5BTlRfRklMVEVSLmluY2x1ZGVzKG1vZGVsKSkge1xuICAgICAgICAgICAgICAgICAgICBhcmdzLndoZXJlID0geyBcbiAgICAgICAgICAgICAgICAgICAgICAuLi5hcmdzLndoZXJlLCBcbiAgICAgICAgICAgICAgICAgICAgICBiaWRQcm9qZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW5hbnRJZDogdGVuYW50SWRcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhcmdzLndoZXJlID0geyAuLi5hcmdzLndoZXJlLCB0ZW5hbnRJZCB9O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyDlr7nkuo7pnIDopoHpgJrov4flhbPogZTmqKHlnovov4fmu6Tnp5/miLfnmoTmqKHlnotcbiAgICAgICAgICAgICAgICAgIGlmIChNT0RFTFNfV0lUSF9SRUxBVElPTl9URU5BTlRfRklMVEVSLmluY2x1ZGVzKG1vZGVsKSkge1xuICAgICAgICAgICAgICAgICAgICBhcmdzLndoZXJlID0geyBcbiAgICAgICAgICAgICAgICAgICAgICBiaWRQcm9qZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW5hbnRJZDogdGVuYW50SWRcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhcmdzLndoZXJlID0geyB0ZW5hbnRJZCB9O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDlr7nkuo7pnIDopoHpgJrov4flhbPogZTmqKHlnovov4fmu6Tnp5/miLfnmoTmqKHlnotcbiAgICAgICAgICAgICAgICBpZiAoTU9ERUxTX1dJVEhfUkVMQVRJT05fVEVOQU5UX0ZJTFRFUi5pbmNsdWRlcyhtb2RlbCkpIHtcbiAgICAgICAgICAgICAgICAgIGFyZ3Mud2hlcmUgPSB7IFxuICAgICAgICAgICAgICAgICAgICBiaWRQcm9qZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgdGVuYW50SWQ6IHRlbmFudElkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGFyZ3Mud2hlcmUgPSB7IHRlbmFudElkIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOS4uuWIm+W7uuaTjeS9nOa3u+WKoOenn+aIt0lEXG4gICAgICAgICAgICBpZiAob3BlcmF0aW9uID09PSAnY3JlYXRlJyAmJiAnZGF0YScgaW4gYXJncyAmJiBhcmdzLmRhdGEpIHtcbiAgICAgICAgICAgICAgLy8g6YCa6L+H5YWz6IGU5qih5Z6L55qE5qih5Z6L5LiN6ZyA6KaB55u05o6l6K6+572udGVuYW50SWRcbiAgICAgICAgICAgICAgaWYgKCFNT0RFTFNfV0lUSF9SRUxBVElPTl9URU5BTlRfRklMVEVSLmluY2x1ZGVzKG1vZGVsKSkge1xuICAgICAgICAgICAgICAgIChhcmdzLmRhdGEgYXMgYW55KS50ZW5hbnRJZCA9IHRlbmFudElkO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChvcGVyYXRpb24gPT09ICdjcmVhdGVNYW55JyAmJiBhcmdzLmRhdGEpIHtcbiAgICAgICAgICAgICAgLy8g6YCa6L+H5YWz6IGU5qih5Z6L55qE5qih5Z6L5LiN6ZyA6KaB55u05o6l6K6+572udGVuYW50SWRcbiAgICAgICAgICAgICAgaWYgKCFNT0RFTFNfV0lUSF9SRUxBVElPTl9URU5BTlRfRklMVEVSLmluY2x1ZGVzKG1vZGVsKSkge1xuICAgICAgICAgICAgICAgIGFyZ3MuZGF0YSA9IChhcmdzLmRhdGEgYXMgYW55W10pLm1hcCgoaXRlbTogYW55KSA9PiAoeyAuLi5pdGVtLCB0ZW5hbnRJZCB9KSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHF1ZXJ5KGFyZ3MpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOaVsOaNruW6k+aTjeS9nOWksei0pSAtIOaooeWeizogJHttb2RlbH0sIOaTjeS9nDogJHtvcGVyYXRpb259YCwgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IERhdGFiYXNlRXJyb3IoXG4gICAgICAgICAgICAgIGDmlbDmja7lupPmk43kvZzlpLHotKU6ICR7ZXJyb3IubWVzc2FnZSB8fCAn5pyq55+l6ZSZ6K+vJ31gLFxuICAgICAgICAgICAgICAnREFUQUJBU0VfT1BFUkFUSU9OX0ZBSUxFRCdcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbn0iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiRGF0YWJhc2VFcnJvciIsInByaXNtYSIsImdsb2JhbFRoaXMiLCJsb2ciLCJwcm9jZXNzIiwiTU9ERUxTX1dJVEhfUkVMQVRJT05fVEVOQU5UX0ZJTFRFUiIsIndpdGhUZW5hbnRJc29sYXRpb24iLCJ0ZW5hbnRJZCIsIiRleHRlbmRzIiwicXVlcnkiLCIkYWxsTW9kZWxzIiwiJGFsbE9wZXJhdGlvbnMiLCJtb2RlbCIsIm9wZXJhdGlvbiIsImFyZ3MiLCJpbmNsdWRlcyIsIndoZXJlIiwiYmlkUHJvamVjdCIsImRhdGEiLCJtYXAiLCJpdGVtIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/database.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/error-handler.ts":
/*!**********************************!*\
  !*** ./src/lib/error-handler.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthenticationError: () => (/* binding */ AuthenticationError),\n/* harmony export */   AuthorizationError: () => (/* binding */ AuthorizationError),\n/* harmony export */   BaseError: () => (/* binding */ BaseError),\n/* harmony export */   BusinessError: () => (/* binding */ BusinessError),\n/* harmony export */   DatabaseError: () => (/* binding */ DatabaseError),\n/* harmony export */   NetworkError: () => (/* binding */ NetworkError),\n/* harmony export */   NotFoundError: () => (/* binding */ NotFoundError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   createErrorResponse: () => (/* binding */ createErrorResponse),\n/* harmony export */   createSuccessResponse: () => (/* binding */ createSuccessResponse),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handleAPIError: () => (/* binding */ handleAPIError),\n/* harmony export */   logError: () => (/* binding */ logError)\n/* harmony export */ });\n/**\n * 通用错误处理工具\n */ // 自定义错误基类\nclass BaseError extends Error {\n    constructor(message, code, statusCode = 500, details){\n        super(message);\n        this.code = code;\n        this.statusCode = statusCode;\n        this.details = details;\n        this.name = this.constructor.name;\n        Error.captureStackTrace(this, this.constructor);\n    }\n}\n// 认证相关错误\nclass AuthenticationError extends BaseError {\n    constructor(message, code = \"AUTHENTICATION_ERROR\"){\n        super(message, code, 401);\n    }\n}\n// 授权相关错误\nclass AuthorizationError extends BaseError {\n    constructor(message, code = \"AUTHORIZATION_ERROR\"){\n        super(message, code, 403);\n    }\n}\n// 验证相关错误\nclass ValidationError extends BaseError {\n    constructor(message, code = \"VALIDATION_ERROR\"){\n        super(message, code, 400);\n    }\n}\n// 资源未找到错误\nclass NotFoundError extends BaseError {\n    constructor(message, code = \"NOT_FOUND\"){\n        super(message, code, 404);\n    }\n}\n// 数据库相关错误\nclass DatabaseError extends BaseError {\n    constructor(message, code = \"DATABASE_ERROR\"){\n        super(message, code, 500);\n    }\n}\n// 网络相关错误\nclass NetworkError extends BaseError {\n    constructor(message, code = \"NETWORK_ERROR\"){\n        super(message, code, 500);\n    }\n}\n// 业务逻辑错误\nclass BusinessError extends BaseError {\n    constructor(message, code = \"BUSINESS_ERROR\", statusCode = 400){\n        super(message, code, statusCode);\n    }\n}\n// 创建成功响应\nfunction createSuccessResponse(data, message) {\n    return {\n        success: true,\n        data,\n        message,\n        timestamp: new Date().toISOString()\n    };\n}\n// 创建错误响应\nfunction createErrorResponse(error, statusCode, code) {\n    // 如果是字符串，创建通用错误\n    if (typeof error === \"string\") {\n        return {\n            success: false,\n            error: {\n                message: error,\n                code: code || \"UNKNOWN_ERROR\",\n                statusCode: statusCode || 500\n            },\n            timestamp: new Date().toISOString()\n        };\n    }\n    // 如果是BaseError实例\n    if (error instanceof BaseError) {\n        return {\n            success: false,\n            error: {\n                message: error.message,\n                code: error.code,\n                statusCode: error.statusCode,\n                details: error.details\n            },\n            timestamp: new Date().toISOString()\n        };\n    }\n    // 其他错误类型\n    return {\n        success: false,\n        error: {\n            message: error.message,\n            code: code || \"UNKNOWN_ERROR\",\n            statusCode: statusCode || 500\n        },\n        timestamp: new Date().toISOString()\n    };\n}\n// 处理API路由错误\nfunction handleAPIError(error) {\n    console.error(\"API Error:\", error);\n    if (error instanceof BaseError) {\n        return createErrorResponse(error);\n    }\n    if (error instanceof Error) {\n        // 处理常见的数据库错误\n        if (error.message.includes(\"Unique constraint failed\")) {\n            return createErrorResponse(new DatabaseError(\"数据冲突，记录已存在\", \"UNIQUE_CONSTRAINT_FAILED\"));\n        }\n        if (error.message.includes(\"Foreign key constraint failed\")) {\n            return createErrorResponse(new DatabaseError(\"外键约束失败\", \"FOREIGN_KEY_CONSTRAINT_FAILED\"));\n        }\n        // 处理网络错误\n        if (error.message.includes(\"ECONNREFUSED\") || error.message.includes(\"ENOTFOUND\")) {\n            return createErrorResponse(new NetworkError(\"网络连接失败\", \"NETWORK_CONNECTION_FAILED\"));\n        }\n        return createErrorResponse(error);\n    }\n    return createErrorResponse(\"未知错误\", 500, \"UNKNOWN_ERROR\");\n}\n// 日志记录工具\nfunction logError(error, context, metadata) {\n    const logEntry = {\n        timestamp: new Date().toISOString(),\n        error: {\n            name: error.name,\n            message: error.message,\n            stack: error.stack\n        },\n        context,\n        metadata\n    };\n    console.error(JSON.stringify(logEntry, null, 2));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    BaseError,\n    AuthenticationError,\n    AuthorizationError,\n    ValidationError,\n    NotFoundError,\n    DatabaseError,\n    NetworkError,\n    BusinessError,\n    createSuccessResponse,\n    createErrorResponse,\n    handleAPIError,\n    logError\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBQztJQUNBTTtJQUNBRTtJQUNBRztBQUNGLENBQUMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2ludGVsbGlnZW50LWJpZGRpbmctc3lzdGVtLy4vc3JjL2xpYi9lcnJvci1oYW5kbGVyLnRzP2VkOGIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDpgJrnlKjplJnor6/lpITnkIblt6XlhbdcbiAqL1xuXG4vLyDoh6rlrprkuYnplJnor6/ln7rnsbtcbmV4cG9ydCBjbGFzcyBCYXNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBwdWJsaWMgY29kZTogc3RyaW5nLFxuICAgIHB1YmxpYyBzdGF0dXNDb2RlOiBudW1iZXIgPSA1MDAsXG4gICAgcHVibGljIGRldGFpbHM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gICkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfVxufVxuXG4vLyDorqTor4Hnm7jlhbPplJnor69cbmV4cG9ydCBjbGFzcyBBdXRoZW50aWNhdGlvbkVycm9yIGV4dGVuZHMgQmFzZUVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBjb2RlOiBzdHJpbmcgPSAnQVVUSEVOVElDQVRJT05fRVJST1InKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgY29kZSwgNDAxKTtcbiAgfVxufVxuXG4vLyDmjojmnYPnm7jlhbPplJnor69cbmV4cG9ydCBjbGFzcyBBdXRob3JpemF0aW9uRXJyb3IgZXh0ZW5kcyBCYXNlRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIGNvZGU6IHN0cmluZyA9ICdBVVRIT1JJWkFUSU9OX0VSUk9SJykge1xuICAgIHN1cGVyKG1lc3NhZ2UsIGNvZGUsIDQwMyk7XG4gIH1cbn1cblxuLy8g6aqM6K+B55u45YWz6ZSZ6K+vXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgQmFzZUVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBjb2RlOiBzdHJpbmcgPSAnVkFMSURBVElPTl9FUlJPUicpIHtcbiAgICBzdXBlcihtZXNzYWdlLCBjb2RlLCA0MDApO1xuICB9XG59XG5cbi8vIOi1hOa6kOacquaJvuWIsOmUmeivr1xuZXhwb3J0IGNsYXNzIE5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBCYXNlRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIGNvZGU6IHN0cmluZyA9ICdOT1RfRk9VTkQnKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgY29kZSwgNDA0KTtcbiAgfVxufVxuXG4vLyDmlbDmja7lupPnm7jlhbPplJnor69cbmV4cG9ydCBjbGFzcyBEYXRhYmFzZUVycm9yIGV4dGVuZHMgQmFzZUVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBjb2RlOiBzdHJpbmcgPSAnREFUQUJBU0VfRVJST1InKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgY29kZSwgNTAwKTtcbiAgfVxufVxuXG4vLyDnvZHnu5znm7jlhbPplJnor69cbmV4cG9ydCBjbGFzcyBOZXR3b3JrRXJyb3IgZXh0ZW5kcyBCYXNlRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIGNvZGU6IHN0cmluZyA9ICdORVRXT1JLX0VSUk9SJykge1xuICAgIHN1cGVyKG1lc3NhZ2UsIGNvZGUsIDUwMCk7XG4gIH1cbn1cblxuLy8g5Lia5Yqh6YC76L6R6ZSZ6K+vXG5leHBvcnQgY2xhc3MgQnVzaW5lc3NFcnJvciBleHRlbmRzIEJhc2VFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgY29kZTogc3RyaW5nID0gJ0JVU0lORVNTX0VSUk9SJywgc3RhdHVzQ29kZTogbnVtYmVyID0gNDAwKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgY29kZSwgc3RhdHVzQ29kZSk7XG4gIH1cbn1cblxuLy8g57uf5LiAQVBJ5ZON5bqU5qC85byPXG5leHBvcnQgaW50ZXJmYWNlIEFQSVJlc3BvbnNlPFQgPSBhbnk+IHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgZGF0YT86IFQ7XG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG4gIGVycm9yPzoge1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICBjb2RlPzogc3RyaW5nO1xuICAgIHN0YXR1c0NvZGU/OiBudW1iZXI7XG4gICAgZGV0YWlscz86IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIH07XG4gIHRpbWVzdGFtcDogc3RyaW5nO1xufVxuXG4vLyDliJvlu7rmiJDlip/lk43lupRcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdWNjZXNzUmVzcG9uc2U8VD4oXG4gIGRhdGE6IFQsXG4gIG1lc3NhZ2U/OiBzdHJpbmdcbik6IEFQSVJlc3BvbnNlPFQ+IHtcbiAgcmV0dXJuIHtcbiAgICBzdWNjZXNzOiB0cnVlLFxuICAgIGRhdGEsXG4gICAgbWVzc2FnZSxcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgfTtcbn1cblxuLy8g5Yib5bu66ZSZ6K+v5ZON5bqUXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRXJyb3JSZXNwb25zZShcbiAgZXJyb3I6IEVycm9yIHwgQmFzZUVycm9yIHwgc3RyaW5nLFxuICBzdGF0dXNDb2RlPzogbnVtYmVyLFxuICBjb2RlPzogc3RyaW5nXG4pOiBBUElSZXNwb25zZTxudWxsPiB7XG4gIC8vIOWmguaenOaYr+Wtl+espuS4su+8jOWIm+W7uumAmueUqOmUmeivr1xuICBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLFxuICAgICAgICBjb2RlOiBjb2RlIHx8ICdVTktOT1dOX0VSUk9SJyxcbiAgICAgICAgc3RhdHVzQ29kZTogc3RhdHVzQ29kZSB8fCA1MDAsXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfTtcbiAgfVxuXG4gIC8vIOWmguaenOaYr0Jhc2VFcnJvcuWunuS+i1xuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBCYXNlRXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlLFxuICAgICAgICBzdGF0dXNDb2RlOiBlcnJvci5zdGF0dXNDb2RlLFxuICAgICAgICBkZXRhaWxzOiBlcnJvci5kZXRhaWxzLFxuICAgICAgfSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIH07XG4gIH1cblxuICAvLyDlhbbku5bplJnor6/nsbvlnotcbiAgcmV0dXJuIHtcbiAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICBlcnJvcjoge1xuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIGNvZGU6IGNvZGUgfHwgJ1VOS05PV05fRVJST1InLFxuICAgICAgc3RhdHVzQ29kZTogc3RhdHVzQ29kZSB8fCA1MDAsXG4gICAgfSxcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgfTtcbn1cblxuLy8g5aSE55CGQVBJ6Lev55Sx6ZSZ6K+vXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlQVBJRXJyb3IoZXJyb3I6IHVua25vd24pOiBBUElSZXNwb25zZTxudWxsPiB7XG4gIGNvbnNvbGUuZXJyb3IoJ0FQSSBFcnJvcjonLCBlcnJvcik7XG5cbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgQmFzZUVycm9yKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUVycm9yUmVzcG9uc2UoZXJyb3IpO1xuICB9XG5cbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAvLyDlpITnkIbluLjop4HnmoTmlbDmja7lupPplJnor69cbiAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnVW5pcXVlIGNvbnN0cmFpbnQgZmFpbGVkJykpIHtcbiAgICAgIHJldHVybiBjcmVhdGVFcnJvclJlc3BvbnNlKFxuICAgICAgICBuZXcgRGF0YWJhc2VFcnJvcign5pWw5o2u5Yay56qB77yM6K6w5b2V5bey5a2Y5ZyoJywgJ1VOSVFVRV9DT05TVFJBSU5UX0ZBSUxFRCcpXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdGb3JlaWduIGtleSBjb25zdHJhaW50IGZhaWxlZCcpKSB7XG4gICAgICByZXR1cm4gY3JlYXRlRXJyb3JSZXNwb25zZShcbiAgICAgICAgbmV3IERhdGFiYXNlRXJyb3IoJ+WklumUrue6puadn+Wksei0pScsICdGT1JFSUdOX0tFWV9DT05TVFJBSU5UX0ZBSUxFRCcpXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIOWkhOeQhue9kee7nOmUmeivr1xuICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdFQ09OTlJFRlVTRUQnKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdFTk9URk9VTkQnKSkge1xuICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yUmVzcG9uc2UoXG4gICAgICAgIG5ldyBOZXR3b3JrRXJyb3IoJ+e9kee7nOi/nuaOpeWksei0pScsICdORVRXT1JLX0NPTk5FQ1RJT05fRkFJTEVEJylcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNyZWF0ZUVycm9yUmVzcG9uc2UoZXJyb3IpO1xuICB9XG5cbiAgcmV0dXJuIGNyZWF0ZUVycm9yUmVzcG9uc2UoJ+acquefpemUmeivrycsIDUwMCwgJ1VOS05PV05fRVJST1InKTtcbn1cblxuLy8g5pel5b+X6K6w5b2V5bel5YW3XG5leHBvcnQgZnVuY3Rpb24gbG9nRXJyb3IoZXJyb3I6IEVycm9yLCBjb250ZXh0Pzogc3RyaW5nLCBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcbiAgY29uc3QgbG9nRW50cnkgPSB7XG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgZXJyb3I6IHtcbiAgICAgIG5hbWU6IGVycm9yLm5hbWUsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgIH0sXG4gICAgY29udGV4dCxcbiAgICBtZXRhZGF0YSxcbiAgfTtcblxuICBjb25zb2xlLmVycm9yKEpTT04uc3RyaW5naWZ5KGxvZ0VudHJ5LCBudWxsLCAyKSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgQmFzZUVycm9yLFxuICBBdXRoZW50aWNhdGlvbkVycm9yLFxuICBBdXRob3JpemF0aW9uRXJyb3IsXG4gIFZhbGlkYXRpb25FcnJvcixcbiAgTm90Rm91bmRFcnJvcixcbiAgRGF0YWJhc2VFcnJvcixcbiAgTmV0d29ya0Vycm9yLFxuICBCdXNpbmVzc0Vycm9yLFxuICBjcmVhdGVTdWNjZXNzUmVzcG9uc2UsXG4gIGNyZWF0ZUVycm9yUmVzcG9uc2UsXG4gIGhhbmRsZUFQSUVycm9yLFxuICBsb2dFcnJvcixcbn07Il0sIm5hbWVzIjpbIkJhc2VFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiY29kZSIsInN0YXR1c0NvZGUiLCJkZXRhaWxzIiwibmFtZSIsImNhcHR1cmVTdGFja1RyYWNlIiwiQXV0aGVudGljYXRpb25FcnJvciIsIkF1dGhvcml6YXRpb25FcnJvciIsIlZhbGlkYXRpb25FcnJvciIsIk5vdEZvdW5kRXJyb3IiLCJEYXRhYmFzZUVycm9yIiwiTmV0d29ya0Vycm9yIiwiQnVzaW5lc3NFcnJvciIsImNyZWF0ZVN1Y2Nlc3NSZXNwb25zZSIsImRhdGEiLCJzdWNjZXNzIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiY3JlYXRlRXJyb3JSZXNwb25zZSIsImVycm9yIiwiaGFuZGxlQVBJRXJyb3IiLCJjb25zb2xlIiwiaW5jbHVkZXMiLCJsb2dFcnJvciIsImNvbnRleHQiLCJtZXRhZGF0YSIsImxvZ0VudHJ5Iiwic3RhY2siLCJKU09OIiwic3RyaW5naWZ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/error-handler.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@babel","vendor-chunks/next-auth","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/bcryptjs","vendor-chunks/oauth","vendor-chunks/preact","vendor-chunks/preact-render-to-string","vendor-chunks/yallist","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fworkflows%2Ftenant%2F%5BtenantId%5D%2Fpreferences%2Froute&page=%2Fapi%2Fworkflows%2Ftenant%2F%5BtenantId%5D%2Fpreferences%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fworkflows%2Ftenant%2F%5BtenantId%5D%2Fpreferences%2Froute.ts&appDir=%2FUsers%2Fraistlin%2FDownloads%2F%E4%BB%93%E5%BA%93%2FAI%20Bid%20Assistant%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fraistlin%2FDownloads%2F%E4%BB%93%E5%BA%93%2FAI%20Bid%20Assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();