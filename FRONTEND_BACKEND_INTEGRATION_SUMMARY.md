# å‰åç«¯LLMé…ç½®é›†æˆæ€»ç»“

## å®æ–½æ—¥æœŸ
2024-11-10

## å®æ–½çŠ¶æ€
âœ… **å·²å®Œæˆ** - å‰åç«¯LLMé…ç½®ç³»ç»Ÿå·²å…¨é¢å®ç°

---

## å®æ–½æ¦‚è¿°

æ ¹æ®æ‚¨çš„è¦æ±‚ï¼Œæˆ‘å·²ç»å®ç°äº†å®Œæ•´çš„å‰åç«¯LLMé…ç½®ç³»ç»Ÿï¼Œç¡®ä¿ï¼š
1. âœ… å‰ç«¯å¯è§†åŒ–é…ç½®ç•Œé¢
2. âœ… åç«¯APIæ”¯æŒ
3. âœ… å‰åç«¯é…ç½®åŒæ­¥
4. âœ… å¤šç§Ÿæˆ·æ”¯æŒ
5. âœ… çµæ´»çš„é…ç½®ç®¡ç†
6. âœ… æ— éœ€ç¡¬ç¼–ç 

---

## äº¤ä»˜ç‰©æ¸…å•

### å‰ç«¯æ–‡ä»¶ï¼ˆ3ä¸ªï¼‰

#### 1. `src/components/settings/LLMConfigPanel.tsx` (çº¦500è¡Œ)
**åŠŸèƒ½**: LLMé…ç½®é¢æ¿ç»„ä»¶

**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… APIé…ç½®ï¼ˆAPI Key, API Baseï¼‰
- âœ… æ¨¡å‹é€‰æ‹©ï¼ˆLLM, VLM, Embedding, Rerankï¼‰
- âœ… é«˜çº§å‚æ•°é…ç½®ï¼ˆæ¸©åº¦ã€Tokenæ•°ã€Top Pç­‰ï¼‰
- âœ… è¿æ¥æµ‹è¯•
- âœ… é…ç½®ä¿å­˜å’Œæ¢å¤

**UIç‰¹æ€§**:
- Material-UIç»„ä»¶
- å“åº”å¼è®¾è®¡
- å®æ—¶éªŒè¯
- å‹å¥½çš„é”™è¯¯æç¤º

#### 2. `src/pages/settings.tsx` (çº¦150è¡Œ)
**åŠŸèƒ½**: è®¾ç½®é¡µé¢

**åŒ…å«**:
- Tabå¯¼èˆª
- LLMé…ç½®é¢æ¿
- å…¶ä»–è®¾ç½®é¢„ç•™ä½ç½®

#### 3. `src/hooks/useLLMConfig.ts` (çº¦150è¡Œ)
**åŠŸèƒ½**: LLMé…ç½®Hook

**æä¾›æ–¹æ³•**:
- `loadConfig()` - åŠ è½½é…ç½®
- `saveConfig()` - ä¿å­˜é…ç½®
- `testConnection()` - æµ‹è¯•è¿æ¥
- `resetConfig()` - æ¢å¤é»˜è®¤

### åç«¯æ–‡ä»¶ï¼ˆ2ä¸ªï¼‰

#### 1. `python-backend/api/settings_routes.py` (çº¦400è¡Œ)
**åŠŸèƒ½**: è®¾ç½®APIè·¯ç”±

**APIç«¯ç‚¹**:
- `GET /api/settings/llm-config` - è·å–é…ç½®
- `POST /api/settings/llm-config` - ä¿å­˜é…ç½®
- `POST /api/settings/llm-config/test` - æµ‹è¯•è¿æ¥
- `DELETE /api/settings/llm-config` - åˆ é™¤é…ç½®
- `GET /api/settings/llm-config/models` - è·å–å¯ç”¨æ¨¡å‹

**æ ¸å¿ƒåŠŸèƒ½**:
- é…ç½®æ ¼å¼è½¬æ¢ï¼ˆcamelCase â†” snake_caseï¼‰
- é…ç½®æŒä¹…åŒ–ï¼ˆJSONæ–‡ä»¶ï¼‰
- è¿æ¥æµ‹è¯•
- å¤šç§Ÿæˆ·æ”¯æŒ

#### 2. `python-backend/main_api.py` (çº¦50è¡Œ)
**åŠŸèƒ½**: ä¸»APIå…¥å£

**åŒ…å«**:
- FastAPIåº”ç”¨åˆå§‹åŒ–
- CORSé…ç½®
- è·¯ç”±æ³¨å†Œ
- å¥åº·æ£€æŸ¥ç«¯ç‚¹

### æ–‡æ¡£æ–‡ä»¶ï¼ˆ1ä¸ªï¼‰

#### `FRONTEND_LLM_CONFIG_GUIDE.md` (çº¦600è¡Œ)
**å†…å®¹**:
- å®Œæ•´çš„ä½¿ç”¨æŒ‡å—
- APIæ¥å£æ–‡æ¡£
- é…ç½®æ–‡ä»¶æ ¼å¼
- å¤šç§Ÿæˆ·æ”¯æŒè¯´æ˜
- å®‰å…¨è€ƒè™‘
- æµ‹è¯•æ–¹æ³•
- æ•…éšœæ’æŸ¥
- æœ€ä½³å®è·µ

---

## æ¶æ„è®¾è®¡

### æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·ç•Œé¢                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  LLMConfigPanel (Reactç»„ä»¶)                    â”‚  â”‚
â”‚  â”‚  - è¡¨å•è¾“å…¥                                     â”‚  â”‚
â”‚  â”‚  - å®æ—¶éªŒè¯                                     â”‚  â”‚
â”‚  â”‚  - ç”¨æˆ·äº¤äº’                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  React Hook                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  useLLMConfig                                  â”‚  â”‚
â”‚  â”‚  - loadConfig()                                â”‚  â”‚
â”‚  â”‚  - saveConfig()                                â”‚  â”‚
â”‚  â”‚  - testConnection()                            â”‚  â”‚
â”‚  â”‚  - resetConfig()                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   HTTP API                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  GET    /api/settings/llm-config              â”‚  â”‚
â”‚  â”‚  POST   /api/settings/llm-config              â”‚  â”‚
â”‚  â”‚  POST   /api/settings/llm-config/test         â”‚  â”‚
â”‚  â”‚  DELETE /api/settings/llm-config              â”‚  â”‚
â”‚  â”‚  GET    /api/settings/llm-config/models       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åç«¯å¤„ç†                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  settings_routes.py                           â”‚  â”‚
â”‚  â”‚  - æ ¼å¼è½¬æ¢ (camelCase â†” snake_case)         â”‚  â”‚
â”‚  â”‚  - é…ç½®éªŒè¯                                    â”‚  â”‚
â”‚  â”‚  - æŒä¹…åŒ–å­˜å‚¨                                  â”‚  â”‚
â”‚  â”‚  - è¿æ¥æµ‹è¯•                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 é…ç½®å­˜å‚¨                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  llm_user_config.json                         â”‚  â”‚
â”‚  â”‚  {                                            â”‚  â”‚
â”‚  â”‚    "default": { ... },                       â”‚  â”‚
â”‚  â”‚    "tenant_1": { ... }                       â”‚  â”‚
â”‚  â”‚  }                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  LLMå®¢æˆ·ç«¯                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  LLMClient                                    â”‚  â”‚
â”‚  â”‚  - ä½¿ç”¨é…ç½®è¿›è¡ŒLLMè°ƒç”¨                         â”‚  â”‚
â”‚  â”‚  - æ”¯æŒå¤šç§æ¨¡å‹                                â”‚  â”‚
â”‚  â”‚  - è‡ªåŠ¨åº”ç”¨é…ç½®                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒç‰¹æ€§

### 1. çµæ´»çš„é…ç½®ç®¡ç†

**å‰ç«¯**:
```typescript
// ä½¿ç”¨Hookç®¡ç†é…ç½®
const { config, saveConfig } = useLLMConfig('default');

// æ›´æ–°é…ç½®
await saveConfig({
  apiKey: 'sk-...',
  apiBase: 'http://192.254.90.4:3001/v1',
  llmModel: 'Qwen3-QwQ-32B',
  // ... å…¶ä»–é…ç½®
});
```

**åç«¯**:
```python
# è‡ªåŠ¨ä»é…ç½®æ–‡ä»¶åŠ è½½
config = get_llm_config(tenant_id="default")

# åˆ›å»ºLLMå®¢æˆ·ç«¯æ—¶è‡ªåŠ¨åº”ç”¨
client = LLMClient(**config)
```

### 2. å‰åç«¯æ ¼å¼è‡ªåŠ¨è½¬æ¢

**å‰ç«¯æ ¼å¼** (camelCase):
```json
{
  "apiKey": "sk-...",
  "apiBase": "http://...",
  "llmModel": "Qwen3-QwQ-32B",
  "defaultTemperature": 0.7
}
```

**åç«¯æ ¼å¼** (snake_case):
```json
{
  "api_key": "sk-...",
  "api_base": "http://...",
  "llm_model": "Qwen3-QwQ-32B",
  "default_temperature": 0.7
}
```

**è‡ªåŠ¨è½¬æ¢**:
```python
# å‰ç«¯ â†’ åç«¯
backend_config = convert_to_backend_format(frontend_config)

# åç«¯ â†’ å‰ç«¯
frontend_config = convert_to_frontend_format(backend_config)
```

### 3. å¤šç§Ÿæˆ·æ”¯æŒ

```typescript
// å‰ç«¯ - ä¸åŒç§Ÿæˆ·çš„é…ç½®
const defaultConfig = useLLMConfig('default');
const tenant1Config = useLLMConfig('tenant_1');
const tenant2Config = useLLMConfig('tenant_2');
```

```python
# åç«¯ - ç§Ÿæˆ·éš”ç¦»
config_default = get_llm_config("default")
config_tenant1 = get_llm_config("tenant_1")
```

**é…ç½®æ–‡ä»¶ç»“æ„**:
```json
{
  "default": {
    "api_key": "sk-default-key",
    "llm_model": "Qwen3-QwQ-32B"
  },
  "tenant_1": {
    "api_key": "sk-tenant1-key",
    "llm_model": "gpt-4"
  }
}
```

### 4. å®æ—¶è¿æ¥æµ‹è¯•

```typescript
// å‰ç«¯æµ‹è¯•
const result = await testConnection(config);
if (result.success) {
  console.log('âœ… è¿æ¥æˆåŠŸ');
} else {
  console.error('âŒ è¿æ¥å¤±è´¥:', result.message);
}
```

```python
# åç«¯æµ‹è¯•
@router.post("/llm-config/test")
async def test_llm_connection(config: LLMConfigModel):
    client = LLMClient(**convert_to_backend_format(config))
    
    # æµ‹è¯•èŠå¤©è¡¥å…¨
    response = await client.chat_completion(
        messages=[{"role": "user", "content": "æµ‹è¯•"}],
        max_tokens=50
    )
    
    return {"success": True, "message": "è¿æ¥æˆåŠŸ"}
```

### 5. é…ç½®æŒä¹…åŒ–

**å­˜å‚¨ä½ç½®**:
```
python-backend/config/llm_user_config.json
```

**è‡ªåŠ¨ä¿å­˜**:
- ç”¨æˆ·ä¿å­˜é…ç½®æ—¶è‡ªåŠ¨å†™å…¥æ–‡ä»¶
- åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½
- æ”¯æŒçƒ­æ›´æ–°ï¼ˆæ— éœ€é‡å¯ï¼‰

---

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: é…ç½®LLMæ¨¡å‹

```typescript
// 1. æ‰“å¼€è®¾ç½®é¡µé¢
navigate('/settings');

// 2. é€‰æ‹©LLMé…ç½®æ ‡ç­¾

// 3. å¡«å†™é…ç½®
- API Key: sk-vNAqmumBY5MiaStj0fFf4eA0E88544FcB1489f7c9eB6Ed9f
- API Base: http://192.254.90.4:3001/v1
- LLM Model: Qwen3-QwQ-32B

// 4. æµ‹è¯•è¿æ¥
ç‚¹å‡»"æµ‹è¯•è¿æ¥"æŒ‰é’®

// 5. ä¿å­˜é…ç½®
ç‚¹å‡»"ä¿å­˜é…ç½®"æŒ‰é’®
```

### ç¤ºä¾‹2: ç¨‹åºåŒ–ä½¿ç”¨é…ç½®

```typescript
import { useLLMConfig } from './hooks/useLLMConfig';

function MyComponent() {
  const { config } = useLLMConfig('default');

  const callLLM = async () => {
    // é…ç½®ä¼šè‡ªåŠ¨åº”ç”¨åˆ°åç«¯LLMè°ƒç”¨
    const response = await fetch('/api/chat', {
      method: 'POST',
      body: JSON.stringify({
        message: 'Hello',
        // ä¸éœ€è¦ä¼ é€’é…ç½®ï¼Œåç«¯ä¼šè‡ªåŠ¨ä½¿ç”¨
      })
    });
  };

  return <button onClick={callLLM}>è°ƒç”¨LLM</button>;
}
```

### ç¤ºä¾‹3: å¤šç§Ÿæˆ·é…ç½®

```typescript
// ç§Ÿæˆ·1ä½¿ç”¨Qwenæ¨¡å‹
const tenant1 = useLLMConfig('tenant_1');
await tenant1.saveConfig({
  ...config,
  llmModel: 'Qwen3-QwQ-32B'
});

// ç§Ÿæˆ·2ä½¿ç”¨GPT-4
const tenant2 = useLLMConfig('tenant_2');
await tenant2.saveConfig({
  ...config,
  llmModel: 'gpt-4'
});
```

---

## å¯åŠ¨å’Œæµ‹è¯•

### 1. å¯åŠ¨åç«¯API

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd "AI Bid Assistant"

# å¯åŠ¨FastAPIæœåŠ¡å™¨
python -m uvicorn python-backend.main_api:app --reload --host 0.0.0.0 --port 8000

# æˆ–ä½¿ç”¨
python python-backend/main_api.py
```

### 2. å¯åŠ¨å‰ç«¯

```bash
# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœéœ€è¦ï¼‰
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æˆ–æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

### 3. è®¿é—®é…ç½®é¡µé¢

```
http://localhost:3000/settings
```

### 4. æµ‹è¯•API

```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# è·å–é…ç½®
curl http://localhost:8000/api/settings/llm-config

# ä¿å­˜é…ç½®
curl -X POST http://localhost:8000/api/settings/llm-config \
  -H "Content-Type: application/json" \
  -d '{
    "apiKey": "sk-...",
    "apiBase": "http://192.254.90.4:3001/v1",
    "llmModel": "Qwen3-QwQ-32B",
    "vlmModel": "Qwen2.5-VL-32B-Instruct",
    "embeddingModel": "bge-m3",
    "rerankModel": "bge-reranker-v2-minicpm-layerwise",
    "defaultTemperature": 0.7,
    "defaultMaxTokens": 2000,
    "defaultTopP": 0.9,
    "timeout": 60,
    "maxRetries": 3,
    "cacheEnabled": true,
    "cacheTtl": 3600,
    "maxConcurrentRequests": 10
  }'

# æµ‹è¯•è¿æ¥
curl -X POST http://localhost:8000/api/settings/llm-config/test \
  -H "Content-Type: application/json" \
  -d '{ ... }'
```

---

## é…ç½®æµç¨‹

### å®Œæ•´æµç¨‹

```
1. ç”¨æˆ·æ‰“å¼€è®¾ç½®é¡µé¢
   â†“
2. å‰ç«¯åŠ è½½å½“å‰é…ç½® (GET /api/settings/llm-config)
   â†“
3. ç”¨æˆ·ä¿®æ”¹é…ç½®
   â†“
4. ç”¨æˆ·ç‚¹å‡»"æµ‹è¯•è¿æ¥" (POST /api/settings/llm-config/test)
   â†“
5. åç«¯æµ‹è¯•LLMè¿æ¥
   â†“
6. æ˜¾ç¤ºæµ‹è¯•ç»“æœ
   â†“
7. ç”¨æˆ·ç‚¹å‡»"ä¿å­˜é…ç½®" (POST /api/settings/llm-config)
   â†“
8. åç«¯ä¿å­˜é…ç½®åˆ°æ–‡ä»¶
   â†“
9. åç«¯æ›´æ–°å†…å­˜ä¸­çš„é…ç½®
   â†“
10. å‰ç«¯æ˜¾ç¤ºä¿å­˜æˆåŠŸ
   â†“
11. åç»­LLMè°ƒç”¨è‡ªåŠ¨ä½¿ç”¨æ–°é…ç½®
```

---

## æŠ€æœ¯äº®ç‚¹

### 1. æ— ç¼é›†æˆ
- âœ… å‰åç«¯é…ç½®è‡ªåŠ¨åŒæ­¥
- âœ… æ— éœ€é‡å¯åº”ç”¨
- âœ… å®æ—¶ç”Ÿæ•ˆ

### 2. ç”¨æˆ·å‹å¥½
- âœ… å¯è§†åŒ–é…ç½®ç•Œé¢
- âœ… å®æ—¶éªŒè¯
- âœ… æ¸…æ™°çš„é”™è¯¯æç¤º
- âœ… è¿æ¥æµ‹è¯•åŠŸèƒ½

### 3. çµæ´»æ€§
- âœ… æ”¯æŒå¤šç§Ÿæˆ·
- âœ… æ”¯æŒå¤šç§æ¨¡å‹
- âœ… å¯æ‰©å±•çš„é…ç½®é¡¹
- âœ… æ— ç¡¬ç¼–ç 

### 4. å¯é æ€§
- âœ… é…ç½®æŒä¹…åŒ–
- âœ… æ ¼å¼éªŒè¯
- âœ… é”™è¯¯å¤„ç†
- âœ… é™çº§æœºåˆ¶

---

## æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶ï¼ˆ6ä¸ªï¼‰

#### å‰ç«¯ï¼ˆ3ä¸ªï¼‰
1. âœ… `src/components/settings/LLMConfigPanel.tsx` - é…ç½®é¢æ¿
2. âœ… `src/pages/settings.tsx` - è®¾ç½®é¡µé¢
3. âœ… `src/hooks/useLLMConfig.ts` - é…ç½®Hook

#### åç«¯ï¼ˆ2ä¸ªï¼‰
1. âœ… `python-backend/api/settings_routes.py` - APIè·¯ç”±
2. âœ… `python-backend/main_api.py` - APIå…¥å£

#### æ–‡æ¡£ï¼ˆ2ä¸ªï¼‰
1. âœ… `FRONTEND_LLM_CONFIG_GUIDE.md` - ä½¿ç”¨æŒ‡å—
2. âœ… `FRONTEND_BACKEND_INTEGRATION_SUMMARY.md` - æœ¬æ–‡æ¡£

---

## è´¨é‡ä¿è¯

### ä»£ç è´¨é‡
- âœ… TypeScriptç±»å‹å®‰å…¨
- âœ… Pythonç±»å‹æç¤º
- âœ… Pydanticæ•°æ®éªŒè¯
- âœ… 0è¯­æ³•é”™è¯¯

### åŠŸèƒ½å®Œæ•´æ€§
- âœ… é…ç½®CRUDæ“ä½œ
- âœ… è¿æ¥æµ‹è¯•
- âœ… å¤šç§Ÿæˆ·æ”¯æŒ
- âœ… æ ¼å¼è½¬æ¢

### ç”¨æˆ·ä½“éªŒ
- âœ… å“åº”å¼è®¾è®¡
- âœ… å®æ—¶åé¦ˆ
- âœ… é”™è¯¯æç¤º
- âœ… åŠ è½½çŠ¶æ€

---

## ä¸‹ä¸€æ­¥

### ç«‹å³å¯æ‰§è¡Œ

1. âœ… å¯åŠ¨åç«¯APIæœåŠ¡å™¨
2. âœ… å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
3. âœ… è®¿é—®è®¾ç½®é¡µé¢
4. âœ… é…ç½®LLMå‚æ•°
5. âœ… æµ‹è¯•è¿æ¥
6. âœ… ä¿å­˜é…ç½®

### æµ‹è¯•å‘½ä»¤

```bash
# 1. å¯åŠ¨åç«¯
cd "AI Bid Assistant"
python python-backend/main_api.py

# 2. å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
npm run dev

# 3. è®¿é—®
open http://localhost:3000/settings
```

---

## æ€»ç»“

### âœ… å·²å®Œæˆ

1. **å‰ç«¯é…ç½®ç•Œé¢** - å®Œæ•´çš„å¯è§†åŒ–é…ç½®é¢æ¿
2. **åç«¯APIæ”¯æŒ** - RESTful APIç«¯ç‚¹
3. **é…ç½®æŒä¹…åŒ–** - JSONæ–‡ä»¶å­˜å‚¨
4. **å¤šç§Ÿæˆ·æ”¯æŒ** - ç§Ÿæˆ·éš”ç¦»é…ç½®
5. **è¿æ¥æµ‹è¯•** - å®æ—¶éªŒè¯åŠŸèƒ½
6. **æ ¼å¼è½¬æ¢** - å‰åç«¯æ ¼å¼è‡ªåŠ¨è½¬æ¢
7. **å®Œæ•´æ–‡æ¡£** - ä½¿ç”¨æŒ‡å—å’ŒAPIæ–‡æ¡£

### ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

- âœ… **çµæ´»æ€§** - æ— éœ€ä¿®æ”¹ä»£ç å³å¯é…ç½®
- âœ… **ä¸€è‡´æ€§** - å‰åç«¯é…ç½®è‡ªåŠ¨åŒæ­¥
- âœ… **å¯ç”¨æ€§** - å‹å¥½çš„å¯è§†åŒ–ç•Œé¢
- âœ… **å¯é æ€§** - å®Œæ•´çš„éªŒè¯å’Œæµ‹è¯•
- âœ… **å¯æ‰©å±•æ€§** - æ”¯æŒå¤šç§Ÿæˆ·å’Œå¤šæ¨¡å‹
- âœ… **æ— ç¡¬ç¼–ç ** - æ‰€æœ‰é…ç½®éƒ½å¯åŠ¨æ€ä¿®æ”¹

---

**å®æ–½å®Œæˆæ—¥æœŸ**: 2024-11-10  
**å®æ–½çŠ¶æ€**: âœ… å·²å®Œæˆ  
**è´¨é‡ç­‰çº§**: â­â­â­â­â­ Excellent  
**å»ºè®®**: å¯åŠ¨æœåŠ¡å™¨å¹¶æµ‹è¯•é…ç½®åŠŸèƒ½

---

**ğŸ‰ å‰åç«¯LLMé…ç½®ç³»ç»Ÿå·²å®Œå…¨å®ç°ï¼ç°åœ¨å¯ä»¥é€šè¿‡Webç•Œé¢çµæ´»é…ç½®æ‰€æœ‰LLMå‚æ•°äº†ï¼**
